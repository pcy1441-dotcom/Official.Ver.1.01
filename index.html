<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PINEAPPLE MYSTERY - Official 1.0</title>
<style>
  :root { --bg: #050505; --accent: #f4d03f; --red: #cc0000; --blue: #2b57ff; --green: #28a745; }
  body { 
    font-family: 'Courier New', monospace; background: var(--bg); color: #e0e0e0;
    margin: 0; padding: 0; text-align: center; overflow-x: hidden;
  }
  
  /* ë²„ì „ íƒœê·¸ */
  .v-tag { position: fixed; top: 45px; right: 20px; font-size: 10px; color: #444; font-weight: bold; z-index: 20; }

  /* CAUTION íë¥´ëŠ” ë  */
  .ticker-wrap { width: 100%; overflow: hidden; background: var(--accent); color: #000; padding: 8px 0; font-weight: 900; position: fixed; z-index: 15; }
  .t-top { top: 0; } .t-bottom { bottom: 0; }
  .ticker { display: inline-block; white-space: nowrap; animation: ticker 30s linear infinite; }
  @keyframes ticker { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

  /* í•´í‚¹ ë¡œë”© í™”ë©´ */
  #h-screen {
    display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: #000; z-index: 100; flex-direction: column; justify-content: center; align-items: center;
  }
  .h-msg { color: #fff; font-size: 14px; margin-bottom: 15px; min-height: 20px; }
  .p-cont { width: 200px; height: 3px; background: #222; }
  .p-bar { width: 0%; height: 100%; background: #fff; transition: width 0.1s; }

  /* ë ˆì´ì•„ì›ƒ */
  .wrapper { min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px; box-sizing: border-box; }
  .card { background: rgba(15, 15, 15, 0.95); padding: 40px 30px; border-radius: 20px; border: 1px solid #333; width: 100%; max-width: 380px; box-shadow: 0 10px 50px rgba(0,0,0,0.8); position: relative; }
  
  .btn { background: #111; color: #fff; border: 1px solid #444; padding: 16px; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 15px; font-weight: bold; font-size: 16px; }
  .btn:active { background: #222; border-color: var(--accent); }
  
  /* ê²°ê³¼ í™”ë©´ (í°ìƒ‰ ë°•ìŠ¤) */
  #result { display: none; background: #f5f5f5 !important; color: #111; border: none; }
  #role { font-size: 48px; font-weight: 900; margin-bottom: 5px; }
  #skill { font-size: 32px; font-weight: bold; margin: 15px 0; }
  #desc { font-size: 16px; color: #666; margin-bottom: 30px; line-height: 1.5; }
  
  /* í‚¬ëŸ¬ íƒ€ì… ê³µê°œ í™”ë©´ */
  #final-screen { display: none; }
  .type-text { font-size: 55px; font-weight: 900; margin: 20px 0; text-shadow: 0 0 20px rgba(255,255,255,0.2); }
  
  /* ë¡œê·¸ ë°•ìŠ¤ & ë¹„ë°€ë²ˆí˜¸ */
  .log-section { margin-top: 30px; padding-top: 20px; border-top: 1px solid #222; }
  #log-box { display: none; text-align: left; background: #000; padding: 15px; font-size: 13px; color: #0f0; margin-top: 15px; border: 1px solid #030; font-family: monospace; }
  .pw-input { background: #000; border: 1px solid #333; color: #fff; padding: 10px; width: 120px; text-align: center; border-radius: 5px; margin-bottom: 10px; }

  /* í•˜ë‹¨ ìŠ¤í¬ë¡¤ ë°ì´í„° ì„¼í„° */
  .info-area { background: #080808; padding: 80px 20px; width: 100%; border-top: 1px solid #1a1a1a; }
  .data-box { display: inline-block; text-align: left; font-size: 12px; color: #555; border: 1px dashed #333; padding: 25px; line-height: 1.8; max-width: 500px; }
  
  /* íŠ¹ìˆ˜ íš¨ê³¼ ìƒ‰ìƒ */
  .sk-gun { background: linear-gradient(45deg, #ff1801, #3712ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  .sk-gold { color: #b8860b; } .sk-pink { color: #ff66ff; }
</style>
</head>
<body>

<div class="v-tag">Official 1.0</div>

<div class="ticker-wrap t-top">
  <div class="ticker">SYSTEM ONLINE ğŸ ACCESS GRANTED ğŸ PINEAPPLE HQ ğŸ SECURITY LEVEL: HIGH ğŸ SYSTEM ONLINE ğŸ ACCESS GRANTED ğŸ PINEAPPLE HQ ğŸ SECURITY LEVEL: HIGH ğŸ</div>
</div>

<div id="h-screen">
  <div class="h-msg" id="h-msg">INITIALIZING...</div>
  <div class="p-cont"><div class="p-bar" id="p-bar"></div></div>
</div>

<div class="wrapper">
  <div id="menu" class="card">
    <h1 style="color:var(--accent); letter-spacing:8px; margin-bottom:30px;">PINEAPPLE</h1>
    <div style="margin-bottom:25px;">
      <span style="font-size:12px; color:#444; margin-right:10px;">SPECIAL SKILLS</span>
      <input type="checkbox" id="useSkills" checked style="transform: scale(1.5); vertical-align: middle;">
    </div>
    <div style="margin-bottom:30px; color:#888;">
      PLAYER COUNT : <input type="number" id="pCount" min="4" max="20" value="6" style="background:none; border:none; border-bottom:1px solid #444; color:#fff; width:50px; text-align:center; font-size:18px;">
    </div>
    <button onclick="bootSystem()" class="btn" style="color:var(--accent); border-color:var(--accent);">INITIALIZE SYSTEM</button>
  </div>

  <div id="draw-area" class="card" style="display:none;">
    <div id="pNum" style="font-size:24px; color:#555; margin-bottom:30px; letter-spacing:2px;"></div>
    <button onclick="reveal()" class="btn" style="background:var(--red); border:none; font-size:20px;">ACCESS ROLE</button>
  </div>

  <div id="result" class="card">
    <div id="role"></div>
    <div id="skill"></div>
    <div id="desc"></div>
    <button onclick="next()" class="btn" style="background:#000; color:#fff;">CONFIRM & DESTROY</button>
  </div>

  <div id="final-screen" class="card">
    <div style="font-size:14px; color:#444; letter-spacing:3px;">MISSION ANALYSIS</div>
    <div id="fType" class="type-text"></div>
    <div id="fDesc" style="font-size:16px; color:#888; margin-bottom:40px; line-height:1.4;"></div>
    
    <div class="log-section">
      <input type="password" id="pw" class="pw-input" placeholder="PASS CODE">
      <button onclick="checkLog()" class="btn" style="font-size:12px; margin-top:0;">RECOVER DATA LOG</button>
      <div id="log-box"></div>
    </div>
    
    <button onclick="location.reload()" class="btn" style="background:none; border-color:#222; color:#333; margin-top:30px; font-size:12px;">REBOOT SYSTEM</button>
  </div>
</div>

<div class="info-area">
  <div style="font-size:40px; margin-bottom:20px;">ğŸ</div>
  <div class="data-box">
    > PINEAPPLE SECURITY DATABASE v1.0<br>
    > CORE STATUS: <span style="color:var(--green)">STABLE</span><br>
    > ENCRYPTION KEY: <span style="color:var(--accent)">0217-ACTIVE</span><br><br>
    [SYSTEM PROTOCOL]<br>
    - ë¨¸ë”ëŠ” ìì‹ ì˜ ì •ì²´ë¥¼ ìˆ¨ê¸°ì‹­ì‹œì˜¤.<br>
    - ì‹œë¯¼ ì¤‘ ìµœëŒ€ 2ëª…ë§Œì´ íŠ¹ë³„í•œ ëŠ¥ë ¥ì„ ë¶€ì—¬ë°›ìŠµë‹ˆë‹¤.<br>
    - ëª¨ë“  ë°ì´í„°ëŠ” í™•ì¸ ì¦‰ì‹œ íŒŒê¸°ë©ë‹ˆë‹¤.
  </div>
</div>

<div class="ticker-wrap t-bottom">
  <div class="ticker">ğŸ DO NOT CROSS ğŸ PINEAPPLE CORP ğŸ CLASSIFIED DATA ğŸ DO NOT CROSS ğŸ PINEAPPLE CORP ğŸ CLASSIFIED DATA ğŸ</div>
</div>

<script>
const skills = {
  ë¨¸ë”: [{n:"ë°©íƒ„", d:"í•œ ë²ˆ ê³µê²©ì„ ë²„íŒë‹ˆë‹¤. (2ëª©ìˆ¨)ì…ë‹ˆë‹¤."}, {n:"ê°€ë°©", d:"ì£½ì¸ ëŒ€ìƒì´ ì‚´ì•„ìˆëŠ” ê²ƒì²˜ëŸ¼ í–‰ë™í•˜ë‹¤ê°€ ë§ˆì§€ë§‰ì— ì‚¬ë§í•©ë‹ˆë‹¤. (1ëª…)ì…ë‹ˆë‹¤."}, {n:"ì´ì¡ì´", d:"ë³´ì•ˆê´€ê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì²˜ì¹˜í•©ë‹ˆë‹¤.", s:"sk-gun"}],
  ë³´ì•ˆê´€: [{n:"ê°•ì¸í•œ", d:"ëª©ìˆ¨ì´ 2ê°œê°€ ë©ë‹ˆë‹¤.ì…ë‹ˆë‹¤."}, {n:"ë§ˆí”¼ì•„", d:"ë¨¸ë”ì™€ ëª¨ë“  ì‹œë¯¼ì„ ì œê±°í•˜ë©´ ì¦‰ì‹œ ìŠ¹ë¦¬í•©ë‹ˆë‹¤.", s:"sk-gold"}],
  ì˜ì‚¬: [{n:"ìê°€ì¹˜ìœ ", d:"ìì‹ ì„ ì¹˜ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (1íšŒ)ì…ë‹ˆë‹¤."}, {n:"ì „ë¬¸ ì˜ì‚¬", d:"ìµœëŒ€ 2ëª…ê¹Œì§€ ì¹˜ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ì…ë‹ˆë‹¤."}],
  ì‹œë¯¼: [{n:"ìŠ¤íŒŒì´", d:"ì‹œë¯¼/ë³´ì•ˆê´€ ì œê±° ì‹œ ëª©ìˆ¨ ì¦ê°€. ë¨¸ë” ì²˜ì¹˜ ì‹œ ë™ê·€ì–´ì§„í•˜ë©° ì‹œë¯¼ì´ ìŠ¹ë¦¬í•©ë‹ˆë‹¤.", s:"sk-gold"}, {n:"í¼ë¸”win", d:"ê°€ì¥ ë¨¼ì € ë¨¸ë”ì—ê²Œ ì£½ìœ¼ë©´ ì¦‰ì‹œ ì‹œë¯¼ì´ ìŠ¹ë¦¬í•©ë‹ˆë‹¤.", s:"sk-pink"}, {n:"íŒ¨ë§", d:"í•œ ë²ˆ ê³µê²©ì„ ë§‰ì•„ëƒ…ë‹ˆë‹¤.ì…ë‹ˆë‹¤."}]
};

const mTypes = [
  {n:"Standard", w:60, d:"ì¶”ê°€ ëŠ¥ë ¥ì´ í¬í•¨ëœ ê¸°ë³¸ ë¼ìš´ë“œì…ë‹ˆë‹¤.", c:"#cc0000"},
  {n:"Chillsear", w:30, d:"ì˜ì‚¬ê°€ ì¹˜ë£Œí•  ìˆ˜ ì—†ëŠ” ë¬´ìë¹„í•œ ì•”ì‚´ ë¼ìš´ë“œì…ë‹ˆë‹¤.", c:"#87CEEB"},
  {n:"Zombie", w:10, d:"ì£½ì€ ìê°€ ì¢€ë¹„ê°€ ë˜ì–´ ê°ì—¼ì‹œí‚¤ëŠ” ë¼ìš´ë“œì…ë‹ˆë‹¤.", c:"#32CD32"}
];

const hMsgs = ["íŒŒì¸ì• í”Œ ê»ì§ˆ í•´ë… ì¤‘...", "ë¹„ë°€ë²ˆí˜¸ 0217 ì•”í˜¸í™” ì ìš© ì¤‘...", "ìˆ™ì„± ì—”ì§„ ê°€ë™ ì¤‘...", "ë°ì´í„° ì„¼í„° ì—°ê²° ì‹œë„ ì¤‘..."];
let tP, cur, rls, rMT, uS, aS, log = [];

function bootSystem() {
  document.getElementById("h-screen").style.display = "flex";
  let p = 0;
  const bar = document.getElementById("p-bar");
  const msg = document.getElementById("h-msg");
  
  const iv = setInterval(() => {
    p += Math.random() * 10;
    if(p >= 100) {
      p = 100;
      clearInterval(iv);
      setTimeout(startGame, 600);
    }
    bar.style.width = p + "%";
    if(Math.random() > 0.8) msg.innerText = hMsgs[Math.floor(Math.random()*hMsgs.length)];
  }, 80);
}

function startGame() {
  document.getElementById("h-screen").style.display = "none";
  tP = parseInt(document.getElementById("pCount").value);
  uS = document.getElementById("useSkills").checked;
  
  rls = ["ë¨¸ë”", "ë³´ì•ˆê´€", "ì˜ì‚¬"];
  for(let i=4; i<=tP; i++) rls.push("ì‹œë¯¼");
  rls.sort(() => Math.random() - 0.5);

  const pool = {
    ë¨¸ë”: [...skills.ë¨¸ë”].sort(()=>Math.random()-0.5),
    ë³´ì•ˆê´€: [...skills.ë³´ì•ˆê´€].sort(()=>Math.random()-0.5),
    ì˜ì‚¬: [...skills.ì˜ì‚¬].sort(()=>Math.random()-0.5),
    ì‹œë¯¼: [...skills.ì‹œë¯¼].sort(()=>Math.random()-0.5)
  };

  let cIdxs = []; rls.forEach((r, i) => { if(r==="ì‹œë¯¼") cIdxs.push(i); });
  cIdxs.sort(()=>Math.random()-0.5);
  let lucky = cIdxs.slice(0, 2);

  const rand = Math.random() * 100; let cum = 0;
  for(const t of mTypes) { cum += t.w; if(rand < cum) { rMT = t; break; } }

  aS = rls.map((r, i) => {
    if(!uS) return {n:"ë¬´ëŠ¥ë ¥", d:"ëŠ¥ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.ì…ë‹ˆë‹¤."};
    if(r==="ë¨¸ë”") {
      return (rMT.n==="Standard" && pool.ë¨¸ë”.length > 0) ? pool.ë¨¸ë”.pop() : {n:"SPECIAL", d:"íŠ¹ìˆ˜ íƒ€ì…ì…ë‹ˆë‹¤. ì •ì²´ëŠ” ë§ˆì§€ë§‰ì— ê³µê°œë©ë‹ˆë‹¤."};
    }
    if(r==="ì‹œë¯¼") return lucky.includes(i) ? pool.ì‹œë¯¼.pop() : {n:"ë¬´ëŠ¥ë ¥", d:"ëŠ¥ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.ì…ë‹ˆë‹¤."};
    return pool[r].pop();
  });

  log = rls.map((r, i) => `[PLAYER ${i+1}] ${r} : ${aS[i].n}`);
  cur = 0;
  document.getElementById("menu").style.display = "none";
  document.getElementById("draw-area").style.display = "block";
  document.getElementById("pNum").innerText = `IDENTIFYING PLAYER 1...`;
  window.scrollTo(0,0);
}

function reveal() {
  const r = rls[cur];
  const s = aS[cur];
  const rE = document.getElementById("role");
  const sE = document.getElementById("skill");
  
  rE.innerText = r;
  rE.style.color = r==="ë¨¸ë”"? "var(--red)" : r==="ë³´ì•ˆê´€"? "var(--blue)" : r==="ì˜ì‚¬"? "var(--green)" : "#666";
  sE.innerText = s.n;
  sE.className = s.s || "";
  document.getElementById("desc").innerText = s.d;
  
  document.getElementById("draw-area").style.display = "none";
  document.getElementById("result").style.display = "block";
}

function next() {
  cur++;
  if(cur >= tP) {
    document.getElementById("result").style.display = "none";
    document.getElementById("final-screen").style.display = "block";
    const fT = document.getElementById("fType");
    fT.innerText = uS ? rMT.n : "GAME START";
    fT.style.color = uS ? rMT.c : "#fff";
    document.getElementById("fDesc").innerText = uS ? rMT.d : "ëŠ¥ë ¥ ì—†ì´ ì§„í–‰ë˜ëŠ” í´ë˜ì‹ ëª¨ë“œì…ë‹ˆë‹¤.";
    return;
  }
  document.getElementById("result").style.display = "none";
  document.getElementById("draw-area").style.display = "block";
  document.getElementById("pNum").innerText = `IDENTIFYING PLAYER ${cur+1}...`;
}

function checkLog() {
  const input = document.getElementById("pw").value;
  if(input === "0217") {
    document.getElementById("log-box").innerHTML = "> LOG RECOVERY COMPLETE:<br><br>" + log.join("<br>");
    document.getElementById("log-box").style.display = "block";
  } else {
    alert("ACCESS DENIED: WRONG PASS CODE");
  }
}
</script>
</body>
</html>
